---
title: github copilotæ¥å…¥openai-compatibleæ¨¡å‹ä»¥åŠå»é™¤å®‰å…¨é™åˆ¶çš„æ–¹æ³•
date: 2025-07-28 19:19:40
tags: å…¶ä»–
---
## é‡è¦è¯´æ˜

æœ¬æ–‡å…·æœ‰æ—¶æ•ˆæ€§ï¼Œè¯·æ³¨æ„æ£€æŸ¥ä¿¡æ¯çš„æ­£ç¡®æ€§ï¼

## å‰è¨€

copilotåªæ”¯æŒé‚£å‡ å®¶å›½å¤–çš„æ¨¡å‹æä¾›å•†ï¼Œé™¤äº†openrouterä»¥å¤–æˆ‘ä»¬éƒ½å¾ˆéš¾è¿›è¡Œè®¿é—®å’Œæ”¯ä»˜ï¼Œä»¥åŠcopilotç³»ç»Ÿæç¤ºè¯ä¼šæ‹’ç»å›ç­”éç¼–ç¨‹çš„é—®é¢˜ï¼Œè¿™ç‚¹ä¹Ÿè®©æˆ‘å¾ˆè‹¦æ¼
æ‰€ä»¥ä¸ºäº†å®Œæˆæˆ‘çš„è¿™ä¸¤ä¸ªéœ€æ±‚

1. github copilot chatèƒ½æ¥å…¥è‡ªå®šä¹‰çš„openai-compatibleæ¨¡å‹
2. åˆ é™¤saferule(å®‰å…¨è§„åˆ™)

æˆ‘å»æŸ¥æ‰¾äº†ç›¸å…³çš„å¼€æºç¤¾åŒºå¯»æ‰¾è§£å†³æ–¹æ³•ï¼Œç”±äºcopilot chatå‰äº›æ—¥å­å¼€æºäº†ï¼Œæ‰€ä»¥è¿™ä¸ªç¬¬ä¸€ä¸ªåŠŸèƒ½æœ‰å¼€å‘è€…åšäº†ï¼Œä½†æ˜¯å¾®è½¯è¿˜æ²¡æœ‰å‘å¸ƒreleaseç‰ˆæœ¬ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æ‰“åŒ…æ‰©å±•ï¼Œç¬¬äºŒä¸ªåŠŸèƒ½å¯ä»¥é€šè¿‡ä¿®æ”¹ç³»ç»Ÿæç¤ºè¯æ¥å®ç°ã€‚

## å…·ä½“æ­¥éª¤

1. å…ˆæŠŠä»“åº“å…‹éš†ä¸‹æ¥ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œè¿™ä¸ªå¼€å‘è€…æŠŠåŠŸèƒ½commitåˆ°äº†feat-uiåˆ†æ”¯ï¼Œä¸è¦ä¸‹è½½åˆ°äº†mainåˆ†æ”¯

```bash
git clone -b  feat-ui https://github.com/relic-yuexi/vscode-copilot-chat.git
```

2. åˆ é™¤ç›¸å…³çš„å®‰å…¨é™åˆ¶(å¯é€‰)
   æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ `src\extension\prompts\node\base\safetyRules.tsx`ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯å®‰å…¨è§„åˆ™æç¤ºè¯çš„åº•å±‚æ–‡ä»¶ï¼Œä¼šè¢«æ‰€æœ‰ä»£ç å¼•ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åªä¿®æ”¹è¿™ä¸ªæ–‡ä»¶å°±è¡Œ,
   å¦‚ä¸‹å›¾å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸‹æˆ‘ä»¬çŸ¥é“ä¸ºä»€ä¹ˆé—®éç¼–ç¨‹é—®é¢˜ï¼Œä¼šä¸€ç›´å›ç­”"Sorry, I can't assist with that."äº†ï¼ŒæŠŠè¿™ä¸ªå­—ç¬¦ä¸²æ›¿æ¢æˆä»»æ„çš„è¯å³å¯

![1753703634313](https://cdn.jsdelivr.net/gh/kashima19960/img@master/%E5%85%B6%E4%BB%96/1753703634313.png)

ç„¶åå†æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶  `src\extension\prompts\node\base\copilotIdentity.tsx` ï¼Œè¿™ä¸ªæç¤ºè¯å¼ºåˆ¶äº†æ— è®ºä½ è¯¢é—®ä»»ä½•æ¨¡å‹æ˜¯è°ï¼Œéƒ½ä¼šå›ç­”ä½  "github copilot ",æˆ‘ä¸å–œæ¬¢è¿™ä¸ªï¼Œæ‰€ä»¥æŠŠä»–æ›¿æ¢æˆç©ºæ ¼æˆ–è€…å…¶ä»–çš„æç¤ºè¯

![1753703897738](https://cdn.jsdelivr.net/gh/kashima19960/img@master/%E5%85%B6%E4%BB%96/1753703897738.png)

3. å¼€å§‹æ„å»ºæ‰©å±•ï¼Œå¹¶æ‰“åŒ…æˆvsixæ–‡ä»¶

é¦–å…ˆç¡®ä¿ä½ å·²ç»å®‰è£…äº†Node.jså’Œnpmï¼Œæ²¡å®‰è£…å°±è‡ªå·±æœç´¢å®‰è£…ä¸€ä¸‹ï¼Œä¸éœ€è¦å•¥ä¸“ä¸šçŸ¥è¯†çš„ï¼Œç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

å®‰è£…ä¾èµ–

```bash
npm install
```

ç­‰å¾…å®Œæˆåï¼Œæ‰§è¡Œï¼š

```bash
npx tsx .esbuild.ts
```

å®‰è£…æ‰“åŒ…å·¥å…·vsceï¼Œè¿™ä¸ªå·¥å…·ç”¨æ¥å°†é¡¹ç›®æ‰“åŒ…æˆVSIXæ ¼å¼

```bash
npm install -g vsce
```

æœ€åæ‰§è¡Œï¼š

```bash
vsce package
```

å°±è¿™å››ä¸ªå‘½ä»¤

1. `npm install` - å®‰è£…ä¾èµ–
2. `npx tsx .esbuild.ts` - æ„å»ºé¡¹ç›®
3. `npm install -g vsce` - å®‰è£…æ‰“åŒ…å·¥å…·
4. `vsce package` - ç”ŸæˆVSIXæ–‡ä»¶

æ‰§è¡Œå®Œæˆåï¼Œä½ ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•çœ‹åˆ°ä¸€ä¸ª `.vsix` æ–‡ä»¶ï¼Œè¿™å°±æ˜¯å¯ä»¥å®‰è£…çš„VS Codeæ‰©å±•åŒ…ã€‚

**å®‰è£…æ‰©å±•ï¼š**

- åœ¨VS Codeä¸­æŒ‰ `Ctrl+Shift+P`
- è¾“å…¥ "Extensions: Install from VSIX"
- é€‰æ‹©ç”Ÿæˆçš„ `.vsix` æ–‡ä»¶

å¦ä¸€ç§æ–¹æ³•å°±æ˜¯æ‰“å¼€vscodeçš„æ’ä»¶å¸‚åœºï¼Œç‚¹å‡»å³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹ï¼Œæœ€åä¸€ä¸ªé€‰é¡¹å°±æ˜¯äº†

![1753704416207](https://cdn.jsdelivr.net/gh/kashima19960/img@master/%E5%85%B6%E4%BB%96/1753704416207.png)



>   2025-7-30æ›´æ–°ï¼šè¯„è®ºåŒºæœ‰äººé—®æ€ä¹ˆæ·»åŠ æ¨¡å‹ï¼Œä¹‹å‰æ²¡å†™ï¼Œæˆ‘ä»¥ä¸ºå¤§å®¶éƒ½ä¼šï¼Œä¸‹é¢è¡¥å……ä¸€ä¸‹

## æ·»åŠ openai-compatibleæ¨¡å‹çš„æ–¹æ³•

1.   å…ˆæ‰“å¼€æ¨¡å‹é€‰æ‹©å™¨ï¼Œç‚¹å‡»`manage models`

![image-20250730230507853](https://cdn.jsdelivr.net/gh/kashima19960/img@master/%E5%85%B6%E4%BB%96/image-20250730230507853.png)

2.   ç‚¹å‡»çº¢æ¡†é‚£ä¸€æ ï¼Œè¿™ä¸€æ åœ¨ä½ æˆåŠŸæŒ‰ç…§ä¸Šè¿°æ–¹æ³•æ„å»ºäº†æ‰©å±•åå°±ä¼šæœ‰äº†ï¼Œå®˜æ–¹çš„copilotç›®å‰è¿˜æ²¡æœ‰ï¼Œä½ æ‰¾ä¸åˆ°å°±è¦æ£€æŸ¥ä¸€ä¸‹è‡ªå·±æœ‰æ²¡æœ‰å®‰è£…å¥½æ‰©å±•äº†

![image-20250730230558393](https://cdn.jsdelivr.net/gh/kashima19960/img@master/%E5%85%B6%E4%BB%96/image-20250730230558393.png)

3.   ç†è®ºä¸Šï¼Œåªè¦æ˜¯èƒ½å…¼å®¹ openai æ ¼å¼çš„æ¨¡å‹ä¾›åº”å•†éƒ½èƒ½æ·»åŠ ï¼Œè¿™ä¸ªå…·ä½“ä½ è¦çœ‹å¯¹åº”çš„æ¨¡å‹ä¾›åº”å•†ï¼Œå›½å†…åŸºæœ¬ä¸ŠçŸ¥åçš„æ¨¡å‹éƒ½æ˜¯å…¼å®¹openaiæ ¼å¼çš„ï¼Œè¿™é‡Œæˆ‘ä»¥deepseekä¸ºä¾‹ï¼Œç”±äºæˆ‘è¿™é‡Œå·²ç»æ·»åŠ è¿‡äº†(çœ‹ä¸Šå›¾å°±çŸ¥é“äº†)ï¼Œè¿™é‡Œæ˜¯å–å(åå­—ä»»æ„)ï¼Œç„¶åå›è½¦



![image-20250730231149520](https://cdn.jsdelivr.net/gh/kashima19960/img@master/%E5%85%B6%E4%BB%96/image-20250730231149520.png)

è¾“å…¥base_urlï¼Œè¿™é‡Œæ‰¾å¯¹åº”çš„æ–‡æ¡£è‡ªå·±æŸ¥ï¼Œå›è½¦

![image-20250730231256178](https://cdn.jsdelivr.net/gh/kashima19960/img@master/%E5%85%B6%E4%BB%96/image-20250730231256178.png)

å³ä¸‹è§’ä¼šæç¤ºæˆåŠŸï¼Œ

![image-20250730231323959](https://cdn.jsdelivr.net/gh/kashima19960/img@master/%E5%85%B6%E4%BB%96/image-20250730231323959.png)

å†æ¬¡æ‰“å¼€æ¨¡å‹é€‰æ‹©å™¨å°±èƒ½çœ‹åˆ°äº†

![image-20250730231450547](https://cdn.jsdelivr.net/gh/kashima19960/img@master/%E5%85%B6%E4%BB%96/image-20250730231450547.png)

ç‚¹è¿›å»ï¼Œè¾“å…¥apikeyï¼Œè¿™é‡Œä½ è¦è¾“å…¥æ­£ç¡®çš„apikeyï¼Œä¸ç„¶è·å–modelä¼šå¤±è´¥ï¼Œæˆ‘è¿™é‡Œç”±äºå·²ç»æ·»åŠ è¿‡deepseekçš„æ¨¡å‹äº†ï¼Œæ‰€ä»¥å›¾ç‰‡ä¸­çš„ apikey æ˜¯æˆ‘ä¹±å¡«çš„ğŸ˜‹

![image-20250730231610386](https://cdn.jsdelivr.net/gh/kashima19960/img@master/%E5%85%B6%E4%BB%96/image-20250730231610386.png)

æŠŠæ¨¡å‹idè¾“å…¥ä¸€ä¸‹ï¼Œå…·ä½“idçœ‹å¯¹åº”çš„å®˜æ–¹æ–‡æ¡£

![image-20250730231843822](https://cdn.jsdelivr.net/gh/kashima19960/img@master/%E5%85%B6%E4%BB%96/image-20250730231843822.png)

4.   æµ‹è¯•æ˜¯å¦æ·»åŠ æˆåŠŸ

     ç”±äºä¸Šè¿°çš„æ­¥éª¤å»é™¤äº†å®‰å…¨è§„åˆ™å’Œè‡ªæˆ‘ä»‹ç»ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å‘æ¨¡å‹é—®ä¸€äº›éç¼–ç¨‹é—®é¢˜ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹å›¾ï¼Œå¦‚æœé—®åŸç‰ˆçš„copilotï¼Œä»–æ˜¯ä¸ä¼šå›ç­”ä½ è·Ÿæ¨¡å‹æœ‰å…³çš„ä»»ä½•ä¿¡æ¯çš„ï¼Œåªä¼šå›ç­”â€œ æˆ‘æ˜¯github copilotâ€

     

![image-20250730232230150](https://cdn.jsdelivr.net/gh/kashima19960/img@master/%E5%85%B6%E4%BB%96/image-20250730232230150.png)

## å·²ç»æ‰“åŒ…å¥½çš„æ‰©å±•

å¦‚æœä½ è¿ä¸Šè¿°çš„æ­¥éª¤éƒ½æ²¡åŠæ³•å®Œæˆçš„è¯ï¼Œé‚£å°±ç”¨æˆ‘æ‰“åŒ…å¥½çš„æ‰©å±•å§ï¼Œç­‰æˆ‘æœ‰ç©ºå†å¼„ ğŸ˜•
