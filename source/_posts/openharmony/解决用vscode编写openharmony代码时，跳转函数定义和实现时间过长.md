---
title: Ëß£ÂÜ≥Áî®vscodeÁºñÂÜôopenharmony‰ª£Á†ÅÊó∂ÔºåË∑≥ËΩ¨ÂáΩÊï∞ÂÆö‰πâÂíåÂÆûÁé∞Êó∂Èó¥ËøáÈïø
date: 2025-03-21 20:03:00
tags: openharmony
---

## ÈóÆÈ¢òÊèèËø∞

ÈÅáÂà∞ËøáÁî®VscodeÂú®openharmonyÂ∑•Á®ã‰∏≠ÁºñÂÜô‰ª£Á†ÅÊó∂ÔºåÊô∫ËÉΩÊèêÁ§∫‰ºöÂæàÊÖ¢ÔºåÊØîÂ¶ÇË∑≥ËΩ¨ÂáΩÊï∞ÂÆö‰πâÂíåÂáΩÊï∞ÂÆûÁé∞ÁöÑÊó∂Èó¥ÈùûÂ∏∏Èïø

## ÈóÆÈ¢òÂàÜÊûê

Âú®‰∏≠Êñá‰∫íËÅîÁΩëÊêúÁ¥¢Ëøô‰∏™ÈóÆÈ¢òÔºåÂü∫Êú¨‰∏äÊâæ‰∏çÂà∞Á≠îÊ°àÔºåÊâÄ‰ª•ÊàëÂéªstack overflowÂíågithub‰∏äÊâæ‰∫ÜÂæàÂ§öÊñáÁ´†ÔºåÊúÄÁªàÊòØÊâæÂà∞‰∫ÜÈóÆÈ¢òÊâÄÂú®

Ëøô‰∏§ÁØáÊñáÁ´†ÊèèËø∞‰∫ÜÂÖ∑‰ΩìÁöÑÂéüÂõ†

-   [C++Êô∫ËÉΩÊÑüÁü•ÂíåËß£ÊûêË∂ÖÁ∫ßÊÖ¢Ôºör/vscode --- C++ intellisense and parsing SUPER slow : r/vscode](https://www.reddit.com/r/vscode/comments/l5hz4i/c_intellisense_and_parsing_super_slow/)

-   [Âú®Â§ßÂûã‰ª£Á†ÅÂ∫ì‰∏≠ÔºåC/C++ÁöÑÊô∫ËÉΩÊÑüÁü•ÔºàIntelliSenseÔºâÈùûÂ∏∏ÁºìÊÖ¢ÔºàÁî±‰∫éÂ°´ÂÖÖÊñá‰ª∂ÂêçÁºìÂ≠òÔºâ¬∑ #12169 Âè∑ÈóÆÈ¢ò ¬∑ microsoft/vscode-cpptools --- C/C++ intellisense extremely slow with large codebases (due to populating file name cache) ¬∑ Issue #12169 ¬∑ microsoft/vscode-cpptools](https://github.com/microsoft/vscode-cpptools/issues/12169)

‰∏çÊÉ≥ÁúãÁöÑËØùÔºåÊàëÊÄªÁªì‰∏Ä‰∏ãÔºåÂÖ∂ÂÆûÂ∞±ÊòØVscodeÁöÑc/c++Êâ©Â±ïÁöÑÈóÆÈ¢ò

![image-20250321201200846](https://cdn.jsdelivr.net/gh/kashima19960/img@master/openharmony/image-20250321201200846.png)

Ëøô‰∏™Êâ©Â±ïÊòØÂæÆËΩØÂÆòÊñπÁªôc/c++ËØ≠Ë®ÄÊèê‰æõÊô∫ËÉΩÊèêÁ§∫ÂÜôÁöÑÔºåÂÆÉÁöÑÂ∑•‰ΩúÂéüÁêÜÊòØÊØèÊ¨°ÊâìÂºÄ‰ª£Á†ÅÈ°πÁõÆÁöÑÊó∂ÂÄôÂ∞±ËøõË°åÁ¥¢Âºï‰∏ÄÊ¨°ÔºåÂ¶ÇÊûú‰ª£Á†ÅÂ∫ìÊñá‰ª∂ÂæàÂ∞ëÁöÑËØùÔºåÂÄíÊòØÊ≤°Âï•ÈóÆÈ¢òÔºå‰πüËÉΩÂæàÂø´Ôºå‰ΩÜÊòØÂ¶ÇÊûúÂÉèOpenharmonyËøôÁßçÊ∫êÁ†ÅË∂ÖËøá‰∫Ü20Â§öGÁöÑ‰ª£Á†ÅÂ∫ìÔºåÊØèÊ¨°ÊâìÂºÄÈÉΩËøõË°åÁ¥¢ÂºïÁöÑËØùÔºåÂ∞±‰ºöÈùûÂ∏∏ÊÖ¢ÔºåÊâÄ‰ª•Â∞±‰ºöÂØºËá¥Ë∑≥ËΩ¨ÂáΩÊï∞ÂÆö‰πâÂíåÂáΩÊï∞ÂÆûÁé∞ÁöÑÊó∂Èó¥ÈùûÂ∏∏Èïø

## Ëß£ÂÜ≥ÊñπÊ≥ï

Ëß£ÂÜ≥ÈóÆÈ¢òÊúÄÂ•ΩÁöÑÊñπÊ≥ïÂ∞±ÊòØÊääÈóÆÈ¢òÁöÑÊù•Ê∫êËß£ÂÜ≥ÊéâÔºåÊâÄ‰ª•Êàë‰ª¨Áõ¥Êé•‰∏çÁî®Ëøô‰∏™ÂæÆËΩØÁöÑC/C++Êâ©Â±ïÂ∞±Â•Ω‰∫Üü§ì„ÄÇËøôÈáåÊé®ËçêÁî®ClangdÔºåclangdÊòØ‰∏çÂåÖÂê´‰ª£Á†ÅÊ†ºÂºèÂåñÂíå‰ª£Á†ÅË∞ÉËØïÁöÑÔºåÊâÄ‰ª•ÊúÄÂ•ΩË£Ö‰∏äclang-FormatÂíåCodeLLDB

1.   ÊúÄÂ•ΩË¶ÅÁîüÊàêÁºñËØëÊï∞ÊçÆÂ∫ìcompdb(compile database)Ôºå‰∏çË¶ÅÊØèÊ¨°ÊâìÂºÄÈÉΩÁ¥¢Âºï‰ª£Á†Å 
2.    ÂØπ‰∫éÂ∞èÈ°πÁõÆÔºåc/c++(ÂæÆËΩØÂÆòÊñπÁöÑÊèí‰ª∂)ÊØ´Êó†ÈöúÁ¢ç 
3.    ÂØπ‰∫éÂ§ßÂ∑•Á®ãÔºåÁîüÊàêcompile_commands.jsonÊñá‰ª∂Ôºå‰ΩøÁî®clangd(‰∏ÄÁßçËØ≠Ë®ÄÊúçÂä°Âô®,‰ΩúÁî®ÊòØ‰ª£Á†ÅË°•ÂÖ®ÔºåÈ´ò‰∫ÆÂÖ≥ÈîÆÂ≠óÔºåÂáΩÊï∞Ë∑≥ËΩ¨)Êâ´ÊèèËØ•Êñá‰ª∂Âπ∂‰∏∫ÂΩìÂâçÈ°πÁõÆ‰∏≠ÁöÑÊ∫êÁ†ÅÁîüÊàêÁ¥¢Âºï„ÄÇ 
4.    Áî±‰∫éclangd‰∏éc/c++‰ºö‰∫ßÁîüÂÜ≤Á™ÅÔºåÂõ†‰∏∫Âú®ÁºñÂÜôOpenharmony‰ª£Á†ÅÁöÑÊó∂ÂÄôÊó†Ê≥ï‰ΩøÁî®c/c++ÊâÄÊèê‰æõÁöÑ‰ª£Á†ÅÊ†ºÂºèÂåñÁ®ãÂ∫èÔºåÂõ†‰∏∫ËøôÈáåÈááÁî®clang-formatËøõË°åÂπ≥ÊõøÔºåÂÖ∂‰∏≠Â∞ÜÊ†ºÂºèÂåñstyleËÆæÁΩÆ‰∏∫"WebKit"

![image-20250321202012919](https://cdn.jsdelivr.net/gh/kashima19960/img@master/openharmony/image-20250321202012919.png)

![image-20250321202130068](https://cdn.jsdelivr.net/gh/kashima19960/img@master/openharmony/image-20250321202130068.png)

## ÂÖ∑‰ΩìÈÖçÁΩÆÊñπÊ≥ï

ÈÖçÁΩÆËøáÁ®ãÔºå‰ºöÊ∂âÂèä‰∏Ä‰∫õninjaÁºñËØëÊûÑÂª∫Á≥ªÁªüÁöÑÂÜÖÂÆπÔºåÂ¶ÇÊûú‰Ω†‰∏çÊáÇÁöÑËØùÔºåÂ∞±ÊåâÁÖßÊàëÁªôÁöÑÊ≠•È™§ÁÖßÂÅö

Ê†∏ÂøÉÂ∞±ÊòØÁîüÊàê‰∏Ä‰∏™compile_commands.jsonÁöÑÊñá‰ª∂ÔºåËøô‰∏™Êñá‰ª∂ÁöÑ‰ΩúÁî®Â¶Ç‰∏ã

>   compile_commands.json ÊòØ‰∏Ä‰∏™ÁºñËØëÊï∞ÊçÆÂ∫ìÊñá‰ª∂ÔºåÂåÖÂê´‰∫Ü OpenHarmony È°πÁõÆ‰∏≠ÊØè‰∏™Ê∫êÊñá‰ª∂ÁöÑËØ¶ÁªÜÁºñËØëÈÖçÁΩÆ‰ø°ÊÅØÔºå‰∏ªË¶ÅÁî®ÈÄîÊúâÔºö
>
>   1. **Êèê‰æõ‰ª£Á†ÅÊô∫ËÉΩÂàÜÊûêÂü∫Á°Ä** - ‰Ωø VS Code„ÄÅClangd Á≠âÂ∑•ÂÖ∑ËÉΩÊ≠£Á°ÆÁêÜËß£‰ª£Á†ÅÁªìÊûÑÂíå‰æùËµñÂÖ≥Á≥ª
>   2. **Ë∑®ÂºÄÂèëÁéØÂ¢É‰∏ÄËá¥ÊÄß** - Á°Æ‰øù‰∏çÂêåÂºÄÂèëËÄÖ‰ΩøÁî®Áõ∏ÂêåÁöÑÁºñËØëÂèÇÊï∞ÂíåÂ§¥Êñá‰ª∂Ë∑ØÂæÑ
>   3. **ÈùôÊÄÅÂàÜÊûêÊîØÊåÅ** - Â∏ÆÂä©ÈùôÊÄÅ‰ª£Á†ÅÂàÜÊûêÂ∑•ÂÖ∑ÊåâÁÖßÁúüÂÆûÁºñËØëÈÄâÈ°πÂàÜÊûê‰ª£Á†Å
>   4. **ËæÖÂä©Ë∞ÉËØïÂíåÂØºËà™** - ‰Ωø‰ª£Á†ÅÂØºËà™„ÄÅÁ¨¶Âè∑Êü•ÊâæÁ≠âÂäüËÉΩÊõ¥Á≤æÁ°Æ
>
>   Êñá‰ª∂‰∏≠ËÆ∞ÂΩï‰∫ÜÁºñËØëÂëΩ‰ª§„ÄÅÂåÖÂê´Ë∑ØÂæÑ„ÄÅÂÆèÂÆö‰πâ„ÄÅ‰ºòÂåñÈÄâÈ°πÁ≠âÁºñËØëÂô®ÂèÇÊï∞ÔºåÂØπ‰∫éÂÉè OpenHarmony ËøôÊ†∑ÁöÑÂ§ßÂûãÈ°πÁõÆÂ∞§ÂÖ∂ÈáçË¶ÅÔºåËÉΩËÆ©ÂºÄÂèëÂ∑•ÂÖ∑Êõ¥Á≤æÁ°ÆÂú∞ÂàÜÊûê‰ª£Á†Å‰∏ä‰∏ãÊñáÂíå‰æùËµñÂÖ≥Á≥ª„ÄÇ

ÂÆÉ‰∏ÄËà¨ÈïøËøô‰∏™Ê†∑Â≠ê

```json
 {
    "directory": "/home/xxx/workspace/OpenHarmony-v3.1-Release/out/hispark_pegasus/wifiiot_hispark_pegasus",
    "command": "ccache riscv32-unknown-elf-gcc -D_XOPEN_SOURCE=700 -DOHOS_DEBUG -D__LITEOS__ -D__LITEOS_M__ -I../../../applications/sample/wifi-iot/app/loc_info_collector/gpsM_uart -I../../../applications/sample/wifi-iot/app/loc_info_collector/tools -I../../../applications/sample/wifi-iot/app/loc_info_collector/AT_uart -I../../../applications/sample/wifi-iot/app/loc_info_collector/config -I../../../applications/sample/wifi-iot/app/ssd1306 -I../../../applications/sample/wifi-iot/app/loc_info_collector/OLED_FUN -I../../../applications/sample/wifi-iot/app/loc_info_collector/sys -I../../../applications/sample/wifi-iot/app/loc_info_collector/mqtt -I../../../applications/sample/wifi-iot/app/loc_info_collector/uart -I../../../utils/native/lite/include -I../../../kernel/liteos_m/components/cmsis/2.0 -I../../../base/iot_hardware/interfaces/kits/wifiiot_lite -I../../../base/iot_hardware/peripheral/interfaces/kits -I../../../vendor/hisi/hi3861/hi3861/third_party/lwip_sack/include -I../../../foundation/communication/interfaces/kits/wifi_lite/wifiservice -I../../../device/soc/hisilicon/hi3861v100/hi3861_adapter/hals/communication/wifi_lite/wifiservice -I../../../device/soc/hisilicon/hi3861v100/hi3861_adapter/kal -I../../../third_party/nmealib -I../../../third_party/cJSON -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/system/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/config -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/config/nv -I../../../utils/native/lite/include -I../../../device/soc/hisilicon/hi3861v100/hi3861_adapter/kal/cmsis -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/kernel/base/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/targets/hi3861v100/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/kernel/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/arch/risc-v/rv32im -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/components/lib/libm/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/components/lib/libsec/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/net/wpa_supplicant-2.7/src/common -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/targets/hi3861v100/plat/riscv -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/kernel/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/kernel/extended/runstop -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/components/posix/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/components/linux/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/third_party/lwip_sack/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/components/lib/libc/musl/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/components/lib/libc/musl/arch/generic -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/components/lib/libc/musl/arch/riscv32 -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/components/lib/libc/hw/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/components/lib/libc/nuttx/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/components/lib/libsec/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/targets/hi3861v100/config -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/targets/hi3861v100/user -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/targets/hi3861v100/plat -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/targets/hi3861v100/extend/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/arch -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/components/lib/libc/bionic/libm -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/shell/include -I../../../device/soc/hisilicon/hi3861v100/sdk_liteos/platform/os/Huawei_LiteOS/net/telnet/include -I../../../third_party/cJSON -Os -mabi=ilp32 -falign-functions=2 -msave-restore -fno-optimize-strlen -freorder-blocks-algorithm=simple -fno-schedule-insns -fno-inline-small-functions -fno-inline-functions-called-once -mtune=size -mno-small-data-limit=0 -fno-aggressive-loop-optimizations -std=c99 -Wpointer-arith -Wstrict-prototypes -ffunction-sections -fdata-sections -fno-exceptions -fno-short-enums -Wextra -Wundef -U PRODUCT_CFG_BUILD_TIME -DLOS_COMPILE_LDM -DPRODUCT_USR_SOFT_VER_STR=None -DCYGPKG_POSIX_SIGNALS -D__ECOS__ -D__RTOS_ -DPRODUCT_CFG_HAVE_FEATURE_SYS_ERR_INFO -D__LITEOS__ -DLIB_CONFIGURABLE -DLOSCFG_SHELL -DLOSCFG_CACHE_STATICS -DCUSTOM_AT_COMMAND -DLOS_COMPILE_LDM -DLOS_CONFIG_IPERF3 -DCMSIS_OS_VER=2 -DSECUREC_ENABLE_SCANF_FILE=0 -DCONFIG_AT_COMMAND -DPRODUCT_CFG_CHIP_VER_STR=Hi3861V100 -DCHIP_VER_Hi3861 -DPRODUCT_CFG_SOFT_VER_STR=Hi3861 -DHI_BOARD_ASIC -DHI_ON_FLASH -DLITEOS_WIFI_IOT_VERSION -mabi=ilp32 -falign-functions=2 -msave-restore -fno-optimize-strlen -freorder-blocks-algorithm=simple -fno-schedule-insns -fno-inline-small-functions -fno-inline-functions-called-once -mtune=size -mno-small-data-limit=0 -fno-aggressive-loop-optimizations -std=c99 -Wpointer-arith -Wstrict-prototypes -ffunction-sections -fdata-sections -fno-exceptions -fno-short-enums -Wextra -Wundef -U PRODUCT_CFG_BUILD_TIME -DLOS_COMPILE_LDM -DPRODUCT_USR_SOFT_VER_STR=None -DCYGPKG_POSIX_SIGNALS -D__ECOS__ -D__RTOS_ -DPRODUCT_CFG_HAVE_FEATURE_SYS_ERR_INFO -D__LITEOS__ -DLIB_CONFIGURABLE -DLOSCFG_SHELL -DLOSCFG_CACHE_STATICS -DCUSTOM_AT_COMMAND -DLOS_COMPILE_LDM -DLOS_CONFIG_IPERF3 -DCMSIS_OS_VER=2 -DSECUREC_ENABLE_SCANF_FILE=0 -DCONFIG_AT_COMMAND -DPRODUCT_CFG_CHIP_VER_STR=Hi3861V100 -DCHIP_VER_Hi3861 -DPRODUCT_CFG_SOFT_VER_STR=Hi3861 -DHI_BOARD_ASIC -DHI_ON_FLASH -DLITEOS_WIFI_IOT_VERSION -march=rv32imac -fno-common -fno-builtin -fno-strict-aliasing -Wall -fsigned-char -fstack-protector-all -std=c99 -c ../../../applications/sample/wifi-iot/app/loc_info_collector/mqtt/wb_ram.c -o obj/applications/sample/wifi-iot/app/loc_info_collector/mqtt/libmain_process.wb_ram.o",
    "file": "../../../applications/sample/wifi-iot/app/loc_info_collector/mqtt/wb_ram.c",
    "output": "obj/applications/sample/wifi-iot/app/loc_info_collector/mqtt/libmain_process.wb_ram.o"
  }
```

ÈÄöËøá‰ª•‰∏ãÁöÑÊ≠•È™§ÂèØ‰ª•ÁîüÊàêËøô‰∏™Êñá‰ª∂

1.   ËøõÂÖ•build.ninjaÊâÄÂú®ÁõÆÂΩï: cd out/hispark_pegasus/wifiiot_hispark_pegasus/ 

![image-20250321203936108](https://cdn.jsdelivr.net/gh/kashima19960/img@master/openharmony/image-20250321203936108.png)

1.   compile_commands.jsonÁîüÊàêÊåá‰ª§: ninja -C ./ -t compdb cxx cc > compile_commands.json

ËøôÈáå‰Ω†ÂÖ∂ÂÆû‰πüÂèëÁé∞‰∫ÜÔºåÂ∞±ÊòØÂ∞Ü ninja -C ./ -t compdb cxx cc ÁöÑËæìÂá∫ÈáçÂÆöÂêëÂà∞ compile_commands.json Ëøô‰∏™Êñá‰ª∂ÔºåÊâÄ‰ª•ÂÆÉ‰∏çÂè´compile_commands.json‰πüË°åÔºåÂè™‰∏çËøáÊòØÁ∫¶ÂÆö‰øóÊàêÁöÑ‰∏úË•ø„ÄÇ

1.   Â∞Ücompile_commands.jsonÁßªÂä®Âà∞Ê∫êÁ†ÅÊ†πÁõÆÂΩï‰∏ã:mv ./compile_commands.json ../../..

‰Ω†Áî® Vscode ÁßªÂä®‰πüË°åÔºåÊ≤°ÂøÖË¶ÅÈùûÂæóÁî®ÂëΩ‰ª§Ë°å

4.   ÁúãÁúãclangd:idleÊúâÊ≤°ÊúâÂú®ËΩ¨ÔºåÊúâÂú®ËΩ¨ËØ¥ÊòéclangdÂ∞±Âú®Á¥¢ÂºïÂ∑•Á®ãÊ∫êÁ†Å‰∫ÜÔºåÊ≤°ÊúâÁöÑËØùÔºåÂ∞±ÈáçÂêØ‰∏Ä‰∏ã vscode

![image-20250321205850440](https://cdn.jsdelivr.net/gh/kashima19960/img@master/openharmony/image-20250321205850440.png)

## ÂÜôÊàêËÑöÊú¨

Âú®‰Ω†Êõ¥ÊîπOpenharmony‰ª£Á†ÅÁªìÊûÑÁöÑÊó∂ÂÄôÔºåËøô‰∏™ compile_commands.json Ë¶ÅÈáçÊñ∞ÁîüÊàêÔºå‰∏çÁÑ∂Á¥¢Âºï‰∏ç‰∫Ü‰Ω†Ëá™Â∑±ÊúÄÊñ∞ÂÜôÁöÑ‰ª£Á†ÅÊñá‰ª∂Ôºå‰ΩÜÊòØÊØèÊ¨°ÈÉΩË¶ÅËøõË°å‰ª•‰∏äÁöÑÊ≠•È™§ÁîüÊàêËøô‰∏™Êñá‰ª∂ÂæàÈ∫ªÁÉ¶ÔºåÊâÄ‰ª•Êàë‰∏ÄËà¨ÈÉΩÊääÂÆÉÂÜôÊàê‰∏Ä‰∏™bashËÑöÊú¨

```bash
#!/bin/bash

# ÊääËøô‰∏™workspaceÁöÑË∑ØÂæÑÊîπÊàê‰Ω†Ëá™Â∑±ÁöÑÂ∑•Á®ãÊ∫êÁ†ÅË∑ØÂæÑÔºåÂÖ∂‰ªñÁöÑ‰∏çÁî®Âä®
workspace=~/workspace/OpenHarmony-v3.1-Release/

cd $workspace/out/hispark_pegasus/wifiiot_hispark_pegasus/

# ÁîüÊàê compile_commands.json
ninja -C $workspace/out/hispark_pegasus/wifiiot_hispark_pegasus/ -t compdb cxx cc > compile_commands.json

# Â∞Ü compile_commands.json ÁßªÂä®Âà∞Ê∫êÁ†ÅÊ†πÁõÆÂΩï‰∏ã
mv compile_commands.json $workspace
```

## Êúâ‰∏™ÈóÆÈ¢ò

Áî®Ëøô‰∏™ÊñπÊ≥ïÔºåVscode‰ºöÊèêÁ§∫Êúâ‰∫õÂèÇÊï∞Êó†Ê≥ïËØÜÂà´

‰∏¥Êó∂ÁöÑËß£ÂÜ≥ÊñπÊ≥ïÂ∞±ÊòØÊääËøô‰∫õÂèÇÊï∞Âà†Èô§

```bash
#!/bin/bash

# ËøõÂÖ• build.ninja ÊâÄÂú®ÁõÆÂΩï
workspace=~/workspace/OpenHarmony-v3.1-Release/

cd $workspace/out/hispark_pegasus/wifiiot_hispark_pegasus/

# ÁîüÊàê compile_commands.json
ninja -C $workspace/out/hispark_pegasus/wifiiot_hispark_pegasus/ -t compdb cxx cc > compile_commands.json

# ‰ΩøÁî®sedÂà†Èô§‰∏çÈúÄË¶ÅÁöÑÂèÇÊï∞
sed -i 's/-fno-optimize-strlen//g' compile_commands.json
sed -i 's/-freorder-blocks-algorithm=simple//g' compile_commands.json
sed -i 's/-mno-small-data-limit=0//g' compile_commands.json
sed -i 's/-fno-aggressive-loop-optimizations//g' compile_commands.json

# Ê∏ÖÁêÜÂèØËÉΩ‰∫ßÁîüÁöÑÂ§ö‰ΩôÁ©∫Ê†ºÔºàÂèÇÊï∞‰πãÈó¥ÂèØËÉΩÊúâÂ§ö‰∏™Á©∫Ê†ºÔºâ
sed -i 's/  / /g' compile_commands.json

# Â∞Ü compile_commands.json ÁßªÂä®Âà∞Ê∫êÁ†ÅÊ†πÁõÆÂΩï‰∏ã
mv compile_commands.json $workspace

```



![image-20250321210936632](https://cdn.jsdelivr.net/gh/kashima19960/img@master/openharmony/image-20250321210936632.png)

ËôΩÁÑ∂‰∏çÂΩ±ÂìçÊô∫ËÉΩÊèêÁ§∫Ôºå‰ΩÜÊòØÊàë‰πü‰∏çÁü•ÈÅì‰∏∫‰ªÄ‰πàËøô‰∫õÂèÇÊï∞‰ºöÊä•ÈîôÔºåÂ¶ÇÊûúÊúâÂ§ßÁ•ûÁü•ÈÅìÊÄé‰πàËß£ÂÜ≥ÔºåÂèØ‰ª•ÁªôÊàëÂèë‰∏™ÈÇÆÁÆ±CodingCV@outlook.com ÊàñËÄÖÂú®ËØÑËÆ∫Âå∫ÁïôË®ÄÊïô‰∏Ä‰∏ãÊàëÂïäüòäüòä

